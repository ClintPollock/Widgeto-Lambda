name: Test Britive Login

on:
  workflow_dispatch:

permissions:
  id-token: write
  contents: read

jobs:
  login-test:
    runs-on: ubuntu-latest

    steps:
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'

    - name: Install pybritive
      run: pip install pybritive

    - name: Attempt Britive Login
      env:
        TENANT_NAME: se-learn  # üîÅ Replace with your tenant slug
      run: |
        echo "üîê Attempting Britive login to tenant: $TENANT_NAME"
        python -c "
from pybritive import Britive
try:
    b = Britive()
    b.login()
    print('‚úÖ Britive login successful.')
except Exception as e:
    print(f'‚ùå Britive login failed: {e}')
    exit(1)
        "
